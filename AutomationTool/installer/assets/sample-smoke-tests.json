{
  "$schema": "../schemas/smoke-test.schema.json",
  "schemaVersion": 1,
  "description": "Sample autonomous smoke tests demonstrating multi-step prompts, screenshots, and visual verification",
  "defaults": {
    "timeoutSeconds": 180,
    "screenshotAfterEachStep": false,
    "delayBetweenStepsMs": 1000
  },
  "tests": [
    {
      "id": "DEMO-01",
      "name": "Calculator with Screenshot Verification",
      "description": "Opens Calculator, computes 50+25, verifies result visually and via agent response",
      "difficulty": "Simple",
      "steps": [
        {
          "prompt": "Open the Windows Calculator application.",
          "screenshotAfter": true,
          "screenshotLabel": "calc-opened",
          "delayAfterMs": 1500,
          "verifications": [
            { "type": "ProcessRunning", "target": "CalculatorApp", "description": "Calculator is running after step 1" }
          ]
        },
        {
          "prompt": "In Calculator, compute 50 + 25 and tell me the exact result number.",
          "screenshotAfter": true,
          "screenshotLabel": "calc-result"
        }
      ],
      "verifications": [
        { "type": "ResponseContains", "target": "75", "description": "Agent reports result 75" },
        { "type": "ProcessRunning", "target": "CalculatorApp", "description": "Calculator still running" }
      ],
      "cleanupProcesses": ["CalculatorApp"]
    },
    {
      "id": "DEMO-02",
      "name": "Notepad Multi-Step Write and Read",
      "description": "Opens Notepad, types text in two steps, then reads it back",
      "difficulty": "Medium",
      "steps": [
        {
          "prompt": "Open Notepad and type the first line: 'Hello from IdolClick automation!'",
          "screenshotAfter": true,
          "screenshotLabel": "notepad-line1",
          "delayAfterMs": 1000
        },
        {
          "prompt": "Now type a second line in Notepad: 'This is a fully autonomous test.'",
          "screenshotAfter": true,
          "screenshotLabel": "notepad-line2",
          "delayAfterMs": 1000
        },
        {
          "prompt": "Read the text currently shown in Notepad and tell me exactly what both lines say.",
          "clearHistory": false
        }
      ],
      "verifications": [
        { "type": "ProcessRunning", "target": "notepad", "description": "Notepad is running" },
        { "type": "ResponseContains", "target": "Hello from IdolClick", "description": "Agent read back first line" },
        { "type": "ResponseContains", "target": "autonomous test", "description": "Agent read back second line" }
      ],
      "cleanupProcesses": ["notepad"]
    },
    {
      "id": "DEMO-03",
      "name": "Single-Prompt Shorthand",
      "description": "Demonstrates the single-prompt shorthand (no steps array needed)",
      "difficulty": "Simple",
      "prompt": "Take a screenshot of the desktop right now.",
      "verifications": [
        { "type": "ScreenshotCreated", "target": "", "description": "Screenshot file was created" },
        { "type": "ResponseContains", "target": "screenshot", "description": "Agent mentions screenshot" }
      ]
    },
    {
      "id": "DEMO-04",
      "name": "Calc â†’ Notepad Pipeline with Visual Verify",
      "description": "Computes in Calculator, transfers result to Notepad, verifies via vision",
      "difficulty": "Complex",
      "timeoutSeconds": 300,
      "steps": [
        {
          "prompt": "Open Calculator and compute 200 + 150. Tell me the exact result.",
          "screenshotAfter": true,
          "screenshotLabel": "calc-200plus150",
          "delayAfterMs": 1500
        },
        {
          "prompt": "Open Notepad and type 'Answer: 350' on the first line. Keep both apps open.",
          "screenshotAfter": true,
          "screenshotLabel": "notepad-answer",
          "delayAfterMs": 1000,
          "verifications": [
            { "type": "ProcessRunning", "target": "notepad", "description": "Notepad is running after writing" }
          ]
        },
        {
          "prompt": "Read the text in Notepad and confirm what you typed.",
          "screenshotAfter": false
        }
      ],
      "verifications": [
        { "type": "ResponseContains", "target": "350", "description": "Agent reports 350" },
        { "type": "ProcessRunning", "target": "CalculatorApp", "description": "Calculator still running" },
        { "type": "ProcessRunning", "target": "notepad", "description": "Notepad still running" }
      ],
      "cleanupProcesses": ["CalculatorApp", "notepad"]
    }
  ]
}
